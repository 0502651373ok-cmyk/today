<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚òÄÔ∏è Today Is The Day ‚Äî –©–æ–¥–µ–Ω–Ω–∏–∫ –ø—Ä–æ–≥—Ä–µ—Å—É</title>
<link rel="icon" type="image/svg+xml"
href="data:image/svg+xml,
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>
<circle cx='50' cy='50' r='20' fill='yellow' stroke='green' stroke-width='5'/>
<g stroke='green' stroke-width='5'>
<line x1='50' y1='5' x2='50' y2='20'/>
<line x1='50' y1='80' x2='50' y2='95'/>
<line x1='5' y1='50' x2='20' y2='50'/>
<line x1='80' y1='50' x2='95' y2='50'/>
</g></svg>">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f7fbe7;
  color: #333;
  margin: 0;
  text-align: center;
}
header {
  background: linear-gradient(90deg, #ffee58, #aee571);
  padding: 15px;
  font-size: 1.6em;
  font-weight: bold;
  color: #33691e;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
#calendar {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  padding: 15px;
}
.day-btn {
  width: 90px;
  height: 90px;
  border: none;
  border-radius: 12px;
  background: #fff;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  font-weight: bold;
  cursor: pointer;
  transition: 0.2s;
  white-space: pre-line;
}
.day-btn:hover { background: #dcedc8; }
.day-btn.done { background: #c5e1a5; }
#content {
  max-width: 700px;
  margin: 20px auto;
  background: #fff;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  text-align: left;
}
h2 { color: #558b2f; text-align: center; }
section { margin-bottom: 15px; }
label { display: block; margin: 4px 0; }
button.back {
  margin-top: 15px;
  background: #8bc34a;
  color: white;
  border: none;
  border-radius: 6px;
  padding: 8px 15px;
  cursor: pointer;
}
#progressBar {
  width: 80%;
  height: 20px;
  background: #cfd8dc;
  border-radius: 10px;
  margin: 15px auto;
  overflow: hidden;
}
#progressFill {
  height: 100%;
  width: 0%;
  background: #9ccc65;
  transition: width 0.3s;
}
.quote {
  text-align: right;
  font-style: italic;
  font-size: 1.1em;
  color: #33691e;
  margin: 10px 20px 0 0;
}
textarea {
  width: 100%;
  height: 150px;
  margin-top: 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
  padding: 10px;
  font-family: inherit;
  resize: vertical;
}
button.export {
  background: #689f38;
  color: white;
  border: none;
  border-radius: 6px;
  padding: 8px 15px;
  cursor: pointer;
  margin-top: 10px;
}
</style>
</head>
<body>
<header>‚òÄÔ∏è Today Is The Day ‚Äî –©–æ–¥–µ–Ω–Ω–∏–∫ –ø—Ä–æ–≥—Ä–µ—Å—É</header>
<div class="quote" id="quote"></div>

<div id="progressBar"><div id="progressFill"></div></div>
<div id="progressText"></div>

<div id="calendar"></div>
<div id="content" style="display:none"></div>
<button class="export" id="exportBtn">üíæ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —â–æ–¥–µ–Ω–Ω–∏–∫ (.docx)</button>
<script>
// === 1. –ü–æ—á–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ ===
const DAYS = 30;
if (!localStorage.getItem("trackerStartDate")) {
  const now = new Date();
  now.setHours(0,0,0,0);
  localStorage.setItem("trackerStartDate", now.toISOString());
}
const startDate = new Date(localStorage.getItem("trackerStartDate"));
const today = new Date();
today.setHours(0,0,0,0);
const diffDays = Math.floor((today - startDate) / (1000*60*60*24));
const todayIndex = Math.min(diffDays, DAYS-1);

let data = JSON.parse(localStorage.getItem("trackerData")) ||
           Array(DAYS).fill(null).map(()=>({tasks:{}, diary:""}));

function saveData(){
  localStorage.setItem("trackerData", JSON.stringify(data));
  updateProgress();
}

// === 2. –§—Ä–∞–∑–∏ –¥–Ω—è ===
const quotes = [
"Nie zatrzymuj siƒô ‚Äì nawet je≈õli dzi≈õ boli.",
"–¢–∏ –Ω–µ —Ç–∞–º, –¥–µ –±—É–ª–∞. –Ü —Ü–µ –≤–∂–µ –ø–µ—Ä–µ–º–æ–≥–∞.",
"Jeszcze nic nie jest sko≈Ñczone.",
"–ù–µ –±—ñ–π—Å—è, —è–∫—â–æ –ø–æ–≤—ñ–ª—å–Ω–æ ‚Äî –±—ñ–π—Å—è —Å—Ç–æ—è—Ç–∏.",
"≈ªyjesz ‚Äì to znaczy, mo≈ºesz jeszcze zaczƒÖƒá.",
"–ù–∞–≤—ñ—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–π —Ä—É—Ö ‚Äì —Ü–µ –≤–∂–µ —à–ª—è—Ö.",
"Kiedy≈õ bƒôdziesz wdziƒôczna, ≈ºe –Ω–µ –∑–¥–∞–ª–∞—Å—å dzi≈õ.",
"–¢–∏ –Ω–µ –≤—Ç—Ä–∞—Ç–∏–ª–∞ ‚Äî —Ç–∏ –∑–º—ñ–Ω–∏–ª–∞—Å—å.",
"Nawet ma≈Çy krok ‚Äì to te≈º kierunek.",
"–í—Å–µ, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ, ‚Äì —Ü–µ —â–µ –æ–¥–∏–Ω —Ä–∞–Ω–æ–∫, —â–æ–± —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏."
];
document.getElementById("quote").innerText =
  quotes[Math.floor(Math.random()*quotes.length)];

// === 3. –ü—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä ===
function updateProgress(){
  let total=0, done=0;
  data.forEach(day=>{
    for(const t in day.tasks){ total++; if(day.tasks[t]) done++; }
  });
  const percent = total?Math.round(done/total*100):0;
  document.getElementById("progressFill").style.width = percent+"%";
  document.getElementById("progressText").innerText = "–í–∏–∫–æ–Ω–∞–Ω–æ: "+percent+"%";
}

// === 4. –ö–∞–ª–µ–Ω–¥–∞—Ä ===
function showCalendar(){
  const cal=document.getElementById("calendar");
  cal.innerHTML="";
  document.getElementById("content").style.display="none";
  const start=new Date(startDate);
  for(let i=0;i<DAYS;i++){
    const d=new Date(start); d.setDate(start.getDate()+i);
    const label = `${d.getDate()} ${d.toLocaleString("uk-UA",{month:"short"})}\n(${d.toLocaleString("uk-UA",{weekday:"short"})})`;
    const btn=document.createElement("button");
    btn.className="day-btn"+(Object.values(data[i].tasks).every(Boolean)&&Object.keys(data[i].tasks).length?" done":"");
    btn.innerText=label;
    btn.onclick=()=>openDay(i);
    cal.appendChild(btn);
  }
}

// === 5. –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –¥–Ω—è ===
function openDay(i){
  const c=document.getElementById("content");
  const d=new Date(startDate); d.setDate(startDate.getDate()+i);
  const weekday = d.getDay()===0?6:d.getDay()-1;
  const weekDays=["–ü–æ–Ω–µ–¥—ñ–ª–æ–∫","–í—ñ–≤—Ç–æ—Ä–æ–∫","–°–µ—Ä–µ–¥–∞","–ß–µ—Ç–≤–µ—Ä","–ü‚Äô—è—Ç–Ω–∏—Ü—è","–°—É–±–æ—Ç–∞","–ù–µ–¥—ñ–ª—è"];
  const dayName=weekDays[weekday];
  c.innerHTML=`<h2>${dayName} ‚Äî –î–µ–Ω—å ${i+1}</h2>`;

  const cleaningSchedule=["–ù–µ–º–∞","–ö—É—Ö–Ω—è","–ó–∞–ª","–°–∞–Ω–≤—É–∑–æ–ª","–ë–∞–ª–∫–æ–Ω/–∫–æ—Ä–∏–¥–æ—Ä","–ì–µ–Ω–µ—Ä–∞–ª—å–Ω–µ","–ù–µ–º–∞"];
  const dayCleaning=cleaningSchedule[weekday];
  const workout=i%2===0?"–§—ñ—Ç–Ω–µ—Å 40 —Ö–≤":"–•–æ–¥—ñ–Ω–Ω—è –∑ –ø–∞–ª–∫–∞–º–∏ 45 —Ö–≤";

  const cosmetics=[
    {morning:["–î–∞—Ä—Å–æ–Ω–≤–∞–ª—å (–æ–±–ª–∏—á—á—è, –±—Ä–æ–≤–∏, –≤–æ–ª–æ—Å—Å—è)","–Ü–æ–Ω–æ—Ñ–æ—Ä–µ–∑ Ion+ –∑ Bielenda (–≤—ñ—Ç.–°)","–ü—ñ—Å–ª—è D-–ü–∞–Ω—Ç–µ–Ω–æ–ª","SPF 50+"],day:[],evening:[]},
    {morning:["–ú–∞—Å–∫–∞ Renew Anti Age","SPF 50+"],day:["–í—ñ–¥–ø–æ—á–∏–Ω–æ–∫, –∑–≤–æ–ª–æ–∂–µ–Ω–Ω—è"],evening:[]},
    {morning:["SPF 50+"],day:[],evening:["–Ü–æ–Ω–æ—Ñ–æ—Ä–µ–∑ Ion‚àí —ñ–∑ —Å–æ–¥–æ–≤–∏–º —Ä–æ–∑—á–∏–Ω–æ–º","–ü—ñ—Å–ª—è Retinobaza 17000"]},
    {morning:["–î–∞—Ä—Å–æ–Ω–≤–∞–ª—å","–ö–∞–≤—ñ—Ç–∞—Ü—ñ–π–Ω–∞ —á–∏—Å—Ç–∫–∞","–ü—ñ—Å–ª—è D-–ü–∞–Ω—Ç–µ–Ω–æ–ª","SPF 50+"],day:[],evening:[]},
    {morning:["EMS-L –∑ Bielenda (–≤—ñ—Ç.–°)","SPF 50+"],day:[],evening:["EMS-L –∑ Dermogal A+E –∞–±–æ Retinol Collagen Complex","–ü—ñ—Å–ª—è D-–ü–∞–Ω—Ç–µ–Ω–æ–ª"]},
    {morning:["–ñ–µ–ª–∞—Ç–∏–Ω–æ–≤–∞ –º–∞—Å–∫–∞ –¥–ª—è –≤–æ–ª–æ—Å—Å—è","–ú–∞—Å–∫–∞ Renew Anti Age","SPF 50+"],day:[],evening:["EMS-H –∑ Retinol Collagen Complex","–ü—ñ—Å–ª—è D-–ü–∞–Ω—Ç–µ–Ω–æ–ª"]},
    {morning:["–ú–∞—Å–∫–∞ Renew Anti Age","–î–∞—Ä—Å–æ–Ω–≤–∞–ª—å","SPF 50+"],day:[],evening:["–ì–æ–ª–∫–æ–≤–∞ –º–µ–∑–æ—Ç–µ—Ä–∞–ø—ñ—è (–æ–±–ª–∏—á—á—è+–≤–æ–ª–æ—Å—Å—è)","–ü—ñ—Å–ª—è D-–ü–∞–Ω—Ç–µ–Ω–æ–ª"]}
  ];
  const dcos=cosmetics[weekday];

  const schedule={
    –†–ê–ù–û–ö:["‚òï –ö–∞–≤–∞ –∑ –º–æ–ª–æ–∫–æ–º","Creatine, Vitamin C, Ubiquinol, –ú—É–º—ñ–π–æ, L-Tryptophan, Magnesium malate, –†–æ–∑—Ç–æ—Ä–æ–ø—à–∞, Amino Max",
           "–ó–∞—Ä—è–¥–∫–∞ –¥–ª—è —à–∏—ó 20 —Ö–≤ + –õ—è–ø–∫–æ 20 —Ö–≤",...dcos.morning],
    –î–ï–ù–¨:[workout,"Amino Max, Resveratrol, DHA-500, Vitamin C, –†–æ–∑—Ç–æ—Ä–æ–ø—à–∞",...dcos.day],
    –í–ï–ß–Ü–†:["Magnesium bisglycinate, L-Tryptophan, –†–æ–∑—Ç–æ—Ä–æ–ø—à–∞","–†–æ–∑—Ç—è–∂–∫–∞ + –¥–∏—Ö–∞–ª—å–Ω—ñ –≤–ø—Ä–∞–≤–∏",...dcos.evening]
  };

  for(const [title,items] of Object.entries(schedule)){
    const sec=document.createElement("section");
    sec.innerHTML="<h3>"+title+"</h3>";
    items.forEach(txt=>{
      const key=title+"_"+txt;
      if(data[i].tasks[key]===undefined)data[i].tasks[key]=false;
      const lbl=document.createElement("label");
      const chk=document.createElement("input");
      chk.type="checkbox";
      chk.checked=data[i].tasks[key];
      chk.onchange = () => {
       data[i].tasks[key] = chk.checked;
       saveData();
       updateProgress();
    };

      lbl.appendChild(chk);
      lbl.appendChild(document.createTextNode(" "+txt));
      sec.appendChild(lbl);
    });
    c.appendChild(sec);
  }

  // === –ü—Ä–∏–±–∏—Ä–∞–Ω–Ω—è ===
const clSection = document.createElement("section");
clSection.innerHTML = "<h3>–ü–†–ò–ë–ò–†–ê–ù–ù–Ø</h3>";

const clKey = "–ü–†–ò–ë–ò–†–ê–ù–ù–Ø_" + dayCleaning;
if (data[i].tasks[clKey] === undefined) data[i].tasks[clKey] = false;

const clLabel = document.createElement("label");
const clCheckbox = document.createElement("input");
clCheckbox.type = "checkbox";
clCheckbox.checked = data[i].tasks[clKey];
clCheckbox.onchange = () => {
  data[i].tasks[clKey] = clCheckbox.checked;
  saveData();
  updateProgress();
};

clLabel.appendChild(clCheckbox);
clLabel.appendChild(document.createTextNode(" " + dayCleaning));
clSection.appendChild(clLabel);
c.appendChild(clSection);

  // –©–æ–¥–µ–Ω–Ω–∏–∫
  const diary=document.createElement("section");
  diary.innerHTML="<h3>–©–û–î–ï–ù–ù–ò–ö</h3>";
  const ta=document.createElement("textarea");
  ta.value=data[i].diary||"";
  ta.placeholder="–ó–∞–ø–∏—à–∏, —è–∫ –º–∏–Ω—É–≤ –¥–µ–Ω—å...";
  ta.oninput=()=>{data[i].diary=ta.value;saveData();};
  diary.appendChild(ta);
  c.appendChild(diary);

  const back=document.createElement("button");
  back.className="back";
  back.innerText="‚Üê –ù–∞–∑–∞–¥ –¥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è";
  back.onclick=showCalendar;
  c.appendChild(back);
  c.style.display="block";
}

// === 6. –ï–∫—Å–ø–æ—Ä—Ç —É DOCX ===
document.getElementById("exportBtn").onclick=function(){
  let text="‚òÄÔ∏è Today Is The Day ‚Äî –©–æ–¥–µ–Ω–Ω–∏–∫ –ø—Ä–æ–≥—Ä–µ—Å—É\n\n";
  data.forEach((d,i)=>{
    if(d.diary){
      const dt=new Date(startDate); dt.setDate(startDate.getDate()+i);
      text+=`–î–µ–Ω—å ${i+1} (${dt.toLocaleDateString("uk-UA")}):\n${d.diary}\n\n`;
    }
  });
  const blob=new Blob([text],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="TodayIsTheDay_–©–æ–¥–µ–Ω–Ω–∏–∫.docx";
  a.click();
};

updateProgress();
showCalendar();
openDay(todayIndex);
</script>
</body>
</html>
